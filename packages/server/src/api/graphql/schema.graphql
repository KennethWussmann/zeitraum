scalar DateTime

type Query {
  """
  Software version of the server.
  """
  version: String!
  me: User!

  tags(input: TagSearch): TagList!

  timeSpans(input: TimeSpanSearch): TimeSpanList!
  timeSpan(id: ID!): TimeSpan!

  presets(input: PresetSearch): PresetList!
  preset(id: ID!): Preset!
}

type Mutation {
  createTimeSpan(input: CreateTimeSpan!): TimeSpan!
  updateTimeSpan(id: ID!, input: UpdateTimeSpan!): TimeSpan!
  deleteTimeSpan(id: ID!): Boolean!
  """
  Close a time span that does not have an end time yet.
  When invoked without id it will close the time span that is running longest.
  Optionally you can provide an end time to close the time span at a specific time.
  """
  closeTimeSpan(id: ID, end: DateTime): TimeSpan!

  createPreset(input: CreatePreset!): Preset!
  updatePreset(input: UpdatePreset!): Preset!
  deletePreset(id: ID!): Boolean!
}

input CreatePreset {
  name: String!
  tags: [String!]!
  note: String
}

input UpdatePreset {
  name: String!
  tags: [String!]!
  """
  Setting the note to null will remove it
  """
  note: String
}

input PresetSearch {
  limit: Int = 100
  offset: Int = 0
}

input TimeSpanSearch {
  fromInclusive: DateTime
  toInclusive: DateTime
  running: Boolean
  tags: [String!]
  limit: Int = 100
  offset: Int = 0
}

input TagSearch {
  query: String
  limit: Int = 100
  offset: Int = 0
}

input CreateTimeSpan {
  start: DateTime!
  end: DateTime
  note: String
  tags: [String!]!
}

"""
Only non-null fields will be updated.
"""
input UpdateTimeSpan {
  start: DateTime
  end: DateTime
  note: String
  tags: [String!]
}

type TimeSpanList {
  items: [TimeSpan!]!
  total: Int!
}

type TagList {
  items: [Tag!]!
  total: Int!
}

type User {
  id: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  username: String!
}

type Tag {
  id: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  name: String!
}

type TimeSpan {
  id: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  start: DateTime!
  end: DateTime
  note: String
  running: Boolean!
  tags: [Tag!]!
}

type PresetList {
  items: [Preset!]!
  total: Int!
}

type Preset {
  id: ID!
  name: String!
  tags: [Tag!]!
  note: String
}
